<!DOCTYPE html>
<html lang="sv" class="h-full">

  <!-- The head element shared by all pages -->
  {% include 'head.html' %}

<body class="h-full min-h-screen flex flex-col bg-white text-neutral-900 dark:bg-neutral-900 dark:text-neutral-200">
 
  <!-- The header and nav elements shared by all pages -->
  {% include 'header.html' %}

    <!-- Main -->
    <main class="mx-auto max-w-[1800px] flex-1 w-full grid grid-cols-1 py-6 md:grid-cols-3 gap-6 text-sm md:px-4">

      <!-- Section header with map image -->
      <section id="observations-section" class="md:col-span-2">
        <div class="bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-lg">

          <!-- Map header -->
          <div class="p-4 py-2 bg-slate-100 border-b border-neutral-200 dark:bg-black dark:border-neutral-700 flex items-center gap-3">
            <h2 class="text-sm font-semibold">Karta</h2>
          </div>

          <div class="p-4 border-b border-neutral-200 dark:border-neutral-700">
            <div id="map" class="h-[360px] lg:h-[800px] rounded-md"></div>
            <p class="pt-2">För att en obs ska räknas som en betongobs, måste den göras av en person innanför betonggränsen och fågeln måste dessutom också vara innanför gränsen. Det gäller även överflygande fåglar. OBS! Detta skiljer sig från etablerade tomtskådningsregler, där det räcker med att man själv är innanför gränsen.</p>
          </div>

        </div>
      </section>

      <!-- Right hand area: Birding sites -->
      <div class="md:col-span-1 space-y-6 invisible md:visible">
        <div class="bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-lg">
          <div class="p-4 py-2 bg-slate-100 border-b border-neutral-200 dark:bg-black dark:border-neutral-700">
            <h2 class="text-sm font-semibold">Lokaler</h2>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <tbody id="yearly-rankings" class="divide-y divide-neutral-200 dark:divide-neutral-700">
                <tr>
                  <td class="text-sm px-3 py-2">Här är det tänkt att det ska finnas info om lokaler i betongen.</td>
                  <td class="px-3 py-2"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
 
  </main>

  <!-- The footer element shared by all pages -->
  {% include 'footer.html' %}

  <!-- JavaScript snippet for the MapLibre GL JS map -->
  <script>
    const isMobile = window.matchMedia("(max-width: 768px)").matches;

    const map = new maplibregl.Map({
      container: 'map',
      style: '/mapping/style',
      center: [18.051457, 59.326896], // This is on Norr Mälarstrand, close to Stockholms Stadshus.
      zoom: isMobile ? 11 : 12,
    })

    map.addControl(new maplibregl.NavigationControl(), 'top-right');

    map.on('load', () => {
      console.log('STYLE:', map.getStyle());
      console.log('SOURCES:', map.getStyle().sources);
      console.log('LAYERS:', map.getStyle().layers.map(l => l.id));

      // Log any errors MapLibre sees
      map.on('error', e => console.error('Map error:', e.error));
    });
  </script>

</body>
</html>
